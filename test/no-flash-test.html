<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –ø–æ—è–≤–ª–µ–Ω–∏—è</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }
        
        /* –°–∫—Ä—ã–≤–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ */
        body.loading {
            visibility: hidden;
        }
        
        /* –ò–∑–Ω–∞—á–∞–ª—å–Ω—ã–π —á—ë—Ä–Ω—ã–π –æ–≤–µ—Ä–ª–µ–π */
        .initial-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 99999;
            opacity: 1;
            pointer-events: none;
        }
        
        .test-container {
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
            max-width: 600px;
        }
        
        .test-button {
            padding: 15px 30px;
            font-size: 16px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s;
        }
        
        .test-button:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }
        
        .status {
            margin-top: 20px;
            padding: 15px;
            background: #ecf0f1;
            border-radius: 8px;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .success {
            background: #d5f4e6;
            color: #27ae60;
        }
        
        .info {
            background: #d6eaf8;
            color: #3498db;
        }
    </style>
</head>
<body class="loading">
    <!-- –ò–∑–Ω–∞—á–∞–ª—å–Ω—ã–π —á—ë—Ä–Ω—ã–π –æ–≤–µ—Ä–ª–µ–π -->
    <div id="initialOverlay" class="initial-overlay"></div>
    
    <div class="test-container">
        <h1>üöÄ –¢–µ—Å—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –ø–æ—è–≤–ª–µ–Ω–∏—è</h1>
        <p>–ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ "–º–µ–ª—å–∫–∞–µ—Ç" –ø–µ—Ä–µ–¥ –∞–Ω–∏–º–∞—Ü–∏–µ–π</p>
        
        <button class="test-button" onclick="simulateFromIndex()">–°–∏–º—É–ª—è—Ü–∏—è –ø–µ—Ä–µ—Ö–æ–¥–∞ —Å index.html</button>
        <button class="test-button" onclick="simulateDirectLoad()">–°–∏–º—É–ª—è—Ü–∏—è –ø—Ä—è–º–æ–π –∑–∞–≥—Ä—É–∑–∫–∏</button>
        <button class="test-button" onclick="testFullCycle()">–ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç —Ü–∏–∫–ª–∞</button>
        <button class="test-button" onclick="resetPage()">–°–±—Ä–æ—Å —Å—Ç—Ä–∞–Ω–∏—Ü—ã</button>
        
        <div class="status info" id="status">–°—Ç—Ä–∞–Ω–∏—Ü–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é</div>
    </div>

    <script>
        const initialOverlay = document.getElementById('initialOverlay');
        const statusEl = document.getElementById('status');

        function updateStatus(message, className = 'info') {
            statusEl.textContent = message;
            statusEl.className = `status ${className}`;
        }

        function simulateFromIndex() {
            updateStatus('–°–∏–º—É–ª—è—Ü–∏—è: —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å–∫—Ä—ã—Ç–æ–π...', 'info');
            
            // –°–∫—Ä—ã–≤–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É
            document.body.classList.add('loading');
            initialOverlay.style.opacity = '1';
            initialOverlay.style.display = 'block';
            
            setTimeout(() => {
                updateStatus('–ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏ –Ω–∞—á–∏–Ω–∞–µ–º fade-out...', 'info');
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É
                document.body.classList.remove('loading');
                document.body.style.visibility = 'visible';
                
                // –ó–∞–ø—É—Å–∫–∞–µ–º fade-out
                initialOverlay.style.transition = 'opacity 1.5s ease-out';
                initialOverlay.style.opacity = '0';
                
                setTimeout(() => {
                    updateStatus('‚úÖ –ü–µ—Ä–µ—Ö–æ–¥ –∑–∞–≤–µ—Ä—à—ë–Ω! –ù–∏–∫–∞–∫–∏—Ö –º–∏–≥–∞–Ω–∏–π.', 'success');
                }, 1500);
                
            }, 500);
        }

        function simulateDirectLoad() {
            updateStatus('–°–∏–º—É–ª—è—Ü–∏—è: –ø—Ä—è–º–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã...', 'info');
            
            // –ü—Ä—è–º–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ - —Å—Ä–∞–∑—É —É–±–∏—Ä–∞–µ–º –æ–≤–µ—Ä–ª–µ–π
            initialOverlay.style.display = 'none';
            document.body.classList.remove('loading');
            document.body.style.visibility = 'visible';
            
            setTimeout(() => {
                updateStatus('‚úÖ –ü—Ä—è–º–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ - –æ–≤–µ—Ä–ª–µ–π —Å—Ä–∞–∑—É —Å–∫—Ä—ã—Ç', 'success');
            }, 100);
        }

        function testFullCycle() {
            updateStatus('–ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç: —Å–∫—Ä—ã—Ç–∏–µ ‚Üí –ø–æ–∫–∞–∑ ‚Üí fade-out', 'info');
            
            // –≠—Ç–∞–ø 1: –ü–æ–ª–Ω–æ–µ —Å–∫—Ä—ã—Ç–∏–µ
            document.body.classList.add('loading');
            initialOverlay.style.display = 'block';
            initialOverlay.style.opacity = '1';
            initialOverlay.style.transition = 'none';
            
            setTimeout(() => {
                updateStatus('–≠—Ç–∞–ø 1: –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–∫—Ä—ã—Ç–∞ ‚úì', 'info');
            }, 200);
            
            // –≠—Ç–∞–ø 2: –ü–æ–∫–∞–∑ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            setTimeout(() => {
                updateStatus('–≠—Ç–∞–ø 2: –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É ‚úì', 'info');
                document.body.classList.remove('loading');
                document.body.style.visibility = 'visible';
            }, 700);
            
            // –≠—Ç–∞–ø 3: Fade-out
            setTimeout(() => {
                updateStatus('–≠—Ç–∞–ø 3: –ó–∞–ø—É—Å–∫–∞–µ–º fade-out ‚úì', 'info');
                initialOverlay.style.transition = 'opacity 1.5s ease-out';
                initialOverlay.style.opacity = '0';
            }, 1200);
            
            // –§–∏–Ω–∞–ª
            setTimeout(() => {
                updateStatus('üéâ –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –∑–∞–≤–µ—Ä—à—ë–Ω —É—Å–ø–µ—à–Ω–æ!', 'success');
            }, 2700);
        }

        function resetPage() {
            updateStatus('–°–±—Ä–æ—Å –≤ –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ...', 'info');
            
            document.body.classList.remove('loading');
            document.body.style.visibility = 'visible';
            initialOverlay.style.display = 'none';
            initialOverlay.style.opacity = '1';
            initialOverlay.style.transition = 'none';
            
            setTimeout(() => {
                updateStatus('–ì–æ—Ç–æ–≤ –∫ –Ω–æ–≤–æ–º—É —Ç–µ—Å—Ç—É', 'info');
            }, 300);
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('load', () => {
            // –ò–º–∏—Ç–∏—Ä—É–µ–º –ø–æ–≤–µ–¥–µ–Ω–∏–µ content.html
            const fromIndex = window.location.search.includes('from=index');
            
            if (fromIndex) {
                updateStatus('–û–±–Ω–∞—Ä—É–∂–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä from=index - –∑–∞–ø—É—Å–∫ –∞–Ω–∏–º–∞—Ü–∏–∏', 'info');
                simulateFromIndex();
            } else {
                updateStatus('–û–±—ã—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ - —É–±–∏—Ä–∞–µ–º –æ–≤–µ—Ä–ª–µ–π', 'info');
                simulateDirectLoad();
            }
        });
    </script>
</body>
</html>