# Изменения анимации переходов

## Что изменилось

Анимация переходов между страницами изменена с **засветления** на **затемнение**.

### Было (засветление):
- При переходе экран становился белым
- Эффект "вспышки света"

### Стало (затемнение):
- При переходе экран затемняется чёрной тьмой
- При входе на content.html тьма рассеивается от центра к краям

## Файлы, которые были изменены

### 1. `css/utilities/animations.css`
- Обновлены анимации переходов
- Добавлены новые keyframes для затемнения:
  - `exitTextFadeToDark` - затухание текста в темноту
  - `exitBackgroundToDark` - затухание фона
  - `darknessEnvelop` - эффект наступающей тьмы
  - `darknessRecede` - эффект рассеивания тьмы
- Добавлен класс `.darkness-overlay` для оверлея тьмы

### 2. `script.js`
- Полностью переработан метод `performExitAnimation()`
- Увеличена длительность анимации с 800мс до 1100мс
- Добавлены 4 фазы анимации:
  1. Затухание текстовых элементов (0-600мс)
  2. Наступление тьмы с градиентом (200-800мс)
  3. Затухание фона (600мс)
  4. Полное затемнение и переход (1000мс)

### 3. `content.html`
- Обновлен скрипт входа на страницу
- Добавлен эффект рассеивания тьмы при переходе с index.html
- Тьма рассеивается в 4 этапа:
  1. Начальное рассеивание (30% прозрачности в центре)
  2. Расширение света (60% прозрачности)
  3. Почти полное рассеивание (90% прозрачности) 
  4. Полное исчезновение

### 4. `index.html`
- Добавлены стили для `.darkness-overlay`
- Обновлена функция перехода в `page-transition`

## Новые возможности

### Тестирование анимации
Создан файл `test/darkness-transition-test.html` для тестирования эффектов:
- Тест затемнения
- Тест рассеивания
- Полный цикл анимации

### Технические детали

#### Эффект затемнения:
```css
background: radial-gradient(circle at center, transparent 0%, #000 50%);
```

#### Эффект рассеивания:
```css
/* Начальное состояние */
background: #000;

/* Постепенное рассеивание */
background: radial-gradient(circle at center, transparent 30%, #000 80%);
background: radial-gradient(circle at center, transparent 60%, #000 90%);
background: radial-gradient(circle at center, transparent 90%, #000 95%);

/* Полное исчезновение */
opacity: 0;
```

## Как протестировать

1. Откройте `index.html`
2. Нажмите "Начать приключение"
3. Наблюдайте эффект затемнения и рассеивания тьмы

Альтернативно:
1. Откройте `test/darkness-transition-test.html`
2. Используйте кнопки для тестирования отдельных эффектов

## Совместимость

- Все браузеры с поддержкой CSS gradients
- Адаптивный дизайн сохранён
- Настройка `prefers-reduced-motion` учтена

## Производительность

- Использование `will-change: transform, opacity, filter`
- Аппаратное ускорение через CSS transforms
- Оптимизированные timing functions
- Минимальное влияние на FPS
