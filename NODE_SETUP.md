# Запуск Node.js версии Codex

## Быстрый старт (Windows)

### 1. Переключитесь на серверный режим:
Дважды кликните на `switch-to-server.bat`

### 2. Установите зависимости (только первый раз):
```bash
npm install
```

### 3. Запустите сервер:
Дважды кликните на `start-server.bat`

ИЛИ в командной строке:
```bash
npm start
```

### 4. Откройте в браузере:
http://localhost:3000

## Пошаговая инструкция

### Шаг 1: Установите Node.js
1. Перейдите на https://nodejs.org/
2. Скачайте LTS версию
3. Установите (все настройки по умолчанию)

### Шаг 2: Откройте командную строку в папке проекта
- Windows: Shift + правый клик в папке → "Открыть окно PowerShell здесь"
- Или: Win+R → cmd → cd D:\Git_Projects\Codex

### Шаг 3: Переключите на серверный режим
```bash
switch-to-server.bat
```

### Шаг 4: Установите зависимости
```bash
npm install
```

Это установит:
- express (веб-сервер)
- cors (для кросс-доменных запросов)

### Шаг 5: Запустите сервер
```bash
npm start
```

Вы увидите:
```
Сервер Codex запущен на http://localhost:3000
Доступные эндпоинты:
  POST /api/register - Регистрация
  POST /api/login - Авторизация
  ...
```

### Шаг 6: Откройте сайт
Перейдите в браузере на http://localhost:3000

## Переключение между режимами

### Серверный режим (Node.js):
```bash
switch-to-server.bat
npm start
```
- Данные в папке `data/`
- Нужен запущенный сервер
- Работает API

### Локальный режим (GitHub Pages):
```bash
switch-to-local.bat
```
- Данные в localStorage
- Работает без сервера
- Для GitHub Pages

## Решение проблем

### "npm не является внутренней командой"
- Установите Node.js
- Перезапустите командную строку

### "Cannot find module 'express'"
```bash
npm install
```

### "Порт 3000 занят"
В файле `server.js` измените:
```javascript
const PORT = 3001; // или любой другой
```

### "EACCES: permission denied"
- Запустите от имени администратора
- Или выберите другой порт > 1024

## Структура данных (серверный режим)

```
data/
├── users.json      # Пользователи
├── events.json     # События  
└── sessions.json   # Активные сессии
```

## Преимущества серверного режима

✅ Данные сохраняются на сервере  
✅ Работа с нескольких устройств  
✅ Более безопасное хранение  
✅ API для интеграции  
✅ Возможность бэкапов  

## Команды

```bash
npm start          # Запустить сервер
npm run dev        # Запустить с автоперезагрузкой (нужен nodemon)
npm install        # Установить зависимости

switch-to-server.bat  # Переключить на серверный режим
switch-to-local.bat   # Переключить на локальный режим
start-server.bat      # Быстрый запуск сервера
```
