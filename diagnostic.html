<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ Codex</title>
    <style>
        body {
            font-family: 'Consolas', 'Monaco', monospace;
            background: #1a1a1a;
            color: #fff;
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: #2d2d2d;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        h1 {
            color: #3498db;
            text-align: center;
            margin-bottom: 30px;
        }
        .status {
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            border-left: 4px solid;
        }
        .status.success {
            background: rgba(46, 204, 113, 0.1);
            border-color: #2ecc71;
            color: #2ecc71;
        }
        .status.error {
            background: rgba(231, 76, 60, 0.1);
            border-color: #e74c3c;
            color: #e74c3c;
        }
        .status.warning {
            background: rgba(241, 196, 15, 0.1);
            border-color: #f1c40f;
            color: #f1c40f;
        }
        .status.info {
            background: rgba(52, 152, 219, 0.1);
            border-color: #3498db;
            color: #3498db;
        }
        .log {
            background: #1e1e1e;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            max-height: 300px;
            overflow-y: auto;
            font-size: 12px;
        }
        .log-entry {
            margin: 5px 0;
            padding: 2px 0;
        }
        .log-timestamp {
            color: #888;
            font-size: 11px;
        }
        .log-success { color: #2ecc71; }
        .log-error { color: #e74c3c; }
        .log-warning { color: #f1c40f; }
        .log-info { color: #3498db; }
        
        .test-button {
            background: #3498db;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 5px;
            font-size: 14px;
            transition: background 0.3s;
        }
        .test-button:hover {
            background: #2980b9;
        }
        .test-button:disabled {
            background: #666;
            cursor: not-allowed;
        }
        .progress {
            width: 100%;
            height: 20px;
            background: #444;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #2ecc71);
            width: 0%;
            transition: width 0.3s;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîß –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ Codex</h1>
        
        <div id="server-info" class="status info">
            <strong>üåê –°–µ—Ä–≤–µ—Ä:</strong> <span id="server-url">–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è...</span>
        </div>
        
        <div class="test-controls">
            <button class="test-button" onclick="runFullDiagnostic()">üîç –ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</button>
            <button class="test-button" onclick="testServerWakeup()">‚è∞ –ü—Ä–æ–±—É–¥–∏—Ç—å —Å–µ—Ä–≤–µ—Ä</button>
            <button class="test-button" onclick="testLogin()">üîë –¢–µ—Å—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏</button>
            <button class="test-button" onclick="clearLogs()">üßπ –û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥–∏</button>
        </div>
        
        <div class="progress" id="progress-container" style="display: none;">
            <div class="progress-bar" id="progress-bar"></div>
        </div>
        
        <div id="status-container">
            <!-- –°—Ç–∞—Ç—É—Å—ã —Ç–µ—Å—Ç–æ–≤ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
        </div>
        
        <div class="log" id="log-container">
            <div class="log-entry log-info">
                <span class="log-timestamp">[–°–ò–°–¢–ï–ú–ê]</span> –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ
            </div>
        </div>
    </div>

    <script>
        let logContainer = document.getElementById('log-container');
        let statusContainer = document.getElementById('status-container');
        let serverUrl = '';

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            detectServer();
        });

        function detectServer() {
            if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
                serverUrl = `http://${window.location.hostname}:3000`;
            } else if (window.location.hostname.includes('github.io')) {
                serverUrl = 'https://codex-of.onrender.com';
            } else {
                serverUrl = window.location.origin;
            }
            
            document.getElementById('server-url').textContent = serverUrl;
            log('info', `–û–ø—Ä–µ–¥–µ–ª–µ–Ω —Å–µ—Ä–≤–µ—Ä: ${serverUrl}`);
        }

        function log(type, message) {
            const timestamp = new Date().toLocaleTimeString();
            const entry = document.createElement('div');
            entry.className = `log-entry log-${type}`;
            entry.innerHTML = `<span class="log-timestamp">[${timestamp}]</span> ${message}`;
            logContainer.appendChild(entry);
            logContainer.scrollTop = logContainer.scrollHeight;
        }

        function showStatus(type, title, message) {
            const status = document.createElement('div');
            status.className = `status ${type}`;
            status.innerHTML = `<strong>${title}</strong><br>${message}`;
            statusContainer.appendChild(status);
        }

        function clearLogs() {
            logContainer.innerHTML = '<div class="log-entry log-info"><span class="log-timestamp">[–°–ò–°–¢–ï–ú–ê]</span> –õ–æ–≥–∏ –æ—á–∏—â–µ–Ω—ã</div>';
            statusContainer.innerHTML = '';
        }

        function setProgress(percent) {
            const progressContainer = document.getElementById('progress-container');
            const progressBar = document.getElementById('progress-bar');
            
            if (percent > 0) {
                progressContainer.style.display = 'block';
                progressBar.style.width = percent + '%';
            } else {
                progressContainer.style.display = 'none';
            }
        }

        async function testBasicConnection() {
            log('info', 'üîó –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è...');
            
            try {
                const startTime = Date.now();
                const response = await fetch(serverUrl, {
                    method: 'GET',
                    cache: 'no-cache',
                    headers: {
                        'Cache-Control': 'no-cache'
                    }
                });
                const endTime = Date.now();
                const responseTime = endTime - startTime;

                if (response.ok) {
                    log('success', `‚úÖ –°–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç (${responseTime}ms)`);
                    showStatus('success', '‚úÖ –ë–∞–∑–æ–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ', `–°–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω, –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞: ${responseTime}ms`);
                    return true;
                } else {
                    log('warning', `‚ö†Ô∏è –°–µ—Ä–≤–µ—Ä –≤–µ—Ä–Ω—É–ª —Å—Ç–∞—Ç—É—Å ${response.status}`);
                    showStatus('warning', '‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞ —Å —Å–µ—Ä–≤–µ—Ä–æ–º', `HTTP ${response.status}: ${response.statusText}`);
                    return false;
                }
            } catch (error) {
                log('error', `‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: ${error.message}`);
                showStatus('error', '‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è', `–ù–µ —É–¥–∞–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É: ${error.message}`);
                return false;
            }
        }

        async function testApiEndpoint(endpoint, expectedStatus = 200) {
            log('info', `üîç –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API: ${endpoint}`);
            
            try {
                const response = await fetch(`${serverUrl}${endpoint}`, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer test-token'
                    }
                });

                if (response.status === expectedStatus || (endpoint === '/api/user' && response.status === 401)) {
                    log('success', `‚úÖ API ${endpoint} —Ä–∞–±–æ—Ç–∞–µ—Ç (—Å—Ç–∞—Ç—É—Å: ${response.status})`);
                    return true;
                } else {
                    log('warning', `‚ö†Ô∏è API ${endpoint} –≤–µ—Ä–Ω—É–ª –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π —Å—Ç–∞—Ç—É—Å: ${response.status}`);
                    return false;
                }
            } catch (error) {
                log('error', `‚ùå –û—à–∏–±–∫–∞ API ${endpoint}: ${error.message}`);
                return false;
            }
        }

        async function testServerWakeup() {
            log('info', '‚è∞ –ù–∞—á–∏–Ω–∞–µ—Ç—Å—è –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞...');
            setProgress(10);
            
            const startTime = Date.now();
            let attempts = 0;
            const maxAttempts = 12; // 60 —Å–µ–∫—É–Ω–¥ –º–∞–∫—Å–∏–º—É–º
            
            while (attempts < maxAttempts) {
                attempts++;
                const progress = (attempts / maxAttempts) * 100;
                setProgress(progress);
                
                try {
                    log('info', `üîÑ –ü–æ–ø—ã—Ç–∫–∞ ${attempts}/${maxAttempts}...`);
                    
                    const response = await fetch(serverUrl, {
                        method: 'GET',
                        cache: 'no-cache',
                        headers: {
                            'Cache-Control': 'no-cache'
                        }
                    });

                    if (response.ok) {
                        const endTime = Date.now();
                        const totalTime = endTime - startTime;
                        
                        log('success', `‚úÖ –°–µ—Ä–≤–µ—Ä –ø—Ä–æ—Å–Ω—É–ª—Å—è –∑–∞ ${totalTime}ms`);
                        showStatus('success', '‚úÖ –ü—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ', `–°–µ—Ä–≤–µ—Ä –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ (${totalTime}ms)`);
                        setProgress(0);
                        return true;
                    }
                } catch (error) {
                    log('warning', `‚ö†Ô∏è –ü–æ–ø—ã—Ç–∫–∞ ${attempts}: ${error.message}`);
                }

                // –ü–∞—É–∑–∞ 5 —Å–µ–∫—É–Ω–¥ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏
                await new Promise(resolve => setTimeout(resolve, 5000));
            }

            log('error', '‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–æ–±—É–¥–∏—Ç—å —Å–µ—Ä–≤–µ—Ä –∑–∞ –æ—Ç–≤–µ–¥–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è');
            showStatus('error', '‚ùå –¢–∞–π–º–∞—É—Ç –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è', '–°–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –±–æ–ª–µ–µ 60 —Å–µ–∫—É–Ω–¥');
            setProgress(0);
            return false;
        }

        async function testLogin() {
            log('info', 'üîë –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏...');
            
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
            const testUsername = 'test-user-' + Date.now();
            const testPassword = 'test-password-123';
            
            try {
                // –°–Ω–∞—á–∞–ª–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                log('info', 'üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è...');
                
                const registerResponse = await fetch(`${serverUrl}/api/register`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        username: testUsername,
                        password: testPassword
                    })
                });

                const registerData = await registerResponse.json();
                
                if (registerData.success) {
                    log('success', '‚úÖ –¢–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω');
                    
                    // –¢–µ–ø–µ—Ä—å —Ç–µ—Å—Ç–∏—Ä—É–µ–º –≤—Ö–æ–¥
                    log('info', 'üîì –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ö–æ–¥–∞...');
                    
                    const loginResponse = await fetch(`${serverUrl}/api/login`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            username: testUsername,
                            password: testPassword
                        })
                    });

                    const loginData = await loginResponse.json();
                    
                    if (loginData.success && loginData.token) {
                        log('success', '‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ');
                        showStatus('success', '‚úÖ –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏', '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥ —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ');
                        
                        // –¢–µ—Å—Ç–∏—Ä—É–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É —Ç–æ–∫–µ–Ω–∞
                        log('info', 'üé´ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞...');
                        
                        const userResponse = await fetch(`${serverUrl}/api/user`, {
                            method: 'GET',
                            headers: {
                                'Authorization': `Bearer ${loginData.token}`,
                                'Content-Type': 'application/json'
                            }
                        });

                        if (userResponse.ok) {
                            const userData = await userResponse.json();
                            log('success', `‚úÖ –¢–æ–∫–µ–Ω –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ${userData.user.username}`);
                            showStatus('success', '‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞', '–°–∏—Å—Ç–µ–º–∞ —Ç–æ–∫–µ–Ω–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ');
                        } else {
                            log('warning', '‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Ç–æ–∫–µ–Ω–∞');
                            showStatus('warning', '‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞ —Å —Ç–æ–∫–µ–Ω–æ–º', '–¢–æ–∫–µ–Ω –Ω–µ –ø—Ä–æ—à–µ–ª –ø—Ä–æ–≤–µ—Ä–∫—É');
                        }
                        
                        return true;
                    } else {
                        log('error', `‚ùå –û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞: ${loginData.error}`);
                        showStatus('error', '‚ùå –û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞', loginData.error || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞');
                        return false;
                    }
                } else {
                    log('error', `‚ùå –û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏: ${registerData.error}`);
                    showStatus('error', '‚ùå –û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏', registerData.error || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞');
                    return false;
                }
            } catch (error) {
                log('error', `‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏: ${error.message}`);
                showStatus('error', '‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞', `–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞: ${error.message}`);
                return false;
            }
        }

        async function checkDatabaseStatus() {
            log('info', 'üóÑÔ∏è –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö...');
            
            try {
                // –ü—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π (—ç—Ç–æ –ø–æ–∫–∞–∂–µ—Ç, —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –ë–î)
                const response = await fetch(`${serverUrl}/api/events`, {
                    method: 'GET',
                    headers: {
                        'Authorization': 'Bearer invalid-token'
                    }
                });

                if (response.status === 401) {
                    // 401 - –Ω–æ—Ä–º–∞–ª—å–Ω–æ, —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç —á—Ç–æ —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–∫–µ–Ω—ã
                    log('success', '‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –æ—Ç–≤–µ—á–∞–µ—Ç (API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 401 –¥–ª—è –Ω–µ–≤–µ—Ä–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞)');
                    showStatus('success', '‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö', 'PostgreSQL —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ');
                    return true;
                } else if (response.status === 500) {
                    log('error', '‚ùå –û—à–∏–±–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (500)');
                    showStatus('error', '‚ùå –ü—Ä–æ–±–ª–µ–º–∞ —Å –ë–î', '–í–æ–∑–º–æ–∂–Ω–æ, –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –∏–ª–∏ –∏—Å—Ç–µ–∫ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è');
                    return false;
                } else {
                    log('warning', `‚ö†Ô∏è –ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç –ë–î: ${response.status}`);
                    showStatus('warning', '‚ö†Ô∏è –ù–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ë–î', `HTTP ${response.status}`);
                    return true;
                }
            } catch (error) {
                log('error', `‚ùå –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ë–î: ${error.message}`);
                showStatus('error', '‚ùå –û—à–∏–±–∫–∞ –ë–î', '–ù–µ —É–¥–∞–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö');
                return false;
            }
        }

        async function runFullDiagnostic() {
            log('info', 'üöÄ –ó–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏...');
            clearLogs();
            log('info', 'üöÄ –ó–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏...');
            
            const tests = [
                { name: '–ë–∞–∑–æ–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ', func: testBasicConnection },
                { name: '–ü—Ä–æ–≤–µ—Ä–∫–∞ API /api/user', func: () => testApiEndpoint('/api/user', 401) },
                { name: '–°–æ—Å—Ç–æ—è–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö', func: checkDatabaseStatus },
                { name: '–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏', func: testLogin }
            ];

            let passedTests = 0;
            const totalTests = tests.length;

            for (let i = 0; i < tests.length; i++) {
                const test = tests[i];
                const progress = ((i + 1) / totalTests) * 100;
                setProgress(progress);
                
                log('info', `üß™ –¢–µ—Å—Ç ${i + 1}/${totalTests}: ${test.name}`);
                
                try {
                    const result = await test.func();
                    if (result) {
                        passedTests++;
                        log('success', `‚úÖ ${test.name} - –ü–†–û–ô–î–ï–ù`);
                    } else {
                        log('error', `‚ùå ${test.name} - –ü–†–û–í–ê–õ–ï–ù`);
                    }
                } catch (error) {
                    log('error', `‚ùå ${test.name} - –û–®–ò–ë–ö–ê: ${error.message}`);
                }

                // –ü–∞—É–∑–∞ –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏
                await new Promise(resolve => setTimeout(resolve, 1000));
            }

            setProgress(0);
            
            // –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç
            const successRate = (passedTests / totalTests) * 100;
            
            if (successRate === 100) {
                log('success', `üéâ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞: ${passedTests}/${totalTests} —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ (${successRate.toFixed(1)}%)`);
                showStatus('success', 'üéâ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞', `–í—Å–µ —Å–∏—Å—Ç–µ–º—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (${passedTests}/${totalTests})`);
            } else if (successRate >= 75) {
                log('warning', `‚ö†Ô∏è –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞: ${passedTests}/${totalTests} —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ (${successRate.toFixed(1)}%)`);
                showStatus('warning', '‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã', `–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ç—Ä–µ–±—É—é—Ç –≤–Ω–∏–º–∞–Ω–∏—è (${passedTests}/${totalTests})`);
            } else {
                log('error', `‚ùå –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞: ${passedTests}/${totalTests} —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ (${successRate.toFixed(1)}%)`);
                showStatus('error', '‚ùå –°–µ—Ä—å–µ–∑–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã', `–°–∏—Å—Ç–µ–º–∞ —Ç—Ä–µ–±—É–µ—Ç –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞ (${passedTests}/${totalTests})`);
            }

            // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
            if (passedTests < totalTests) {
                log('info', 'üí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:');
                if (passedTests === 0) {
                    log('info', '   ‚Ä¢ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É');
                    log('info', '   ‚Ä¢ –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –Ω–µ –ø—Ä–µ–≤—ã—Å–∏–ª –ª–∏–º–∏—Ç—ã Render.com');
                    log('info', '   ‚Ä¢ –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–¥–æ–∂–¥–∞—Ç—å 2-3 –º–∏–Ω—É—Ç—ã –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å —Ç–µ—Å—Ç');
                } else {
                    log('info', '   ‚Ä¢ –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç —á–∞—Å—Ç–∏—á–Ω–æ');
                    log('info', '   ‚Ä¢ –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É');
                    log('info', '   ‚Ä¢ –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å –ë–î - –≤–æ–∑–º–æ–∂–Ω–æ –∏—Å—Ç–µ–∫ 90-–¥–Ω–µ–≤–Ω—ã–π –ª–∏–º–∏—Ç Render.com');
                }
            }
        }
    </script>
</body>
</html>